import{c as ee,j as t,a as W,F as se,r as re}from"./app-CuPv96cr.js";import{C as k,a as R,b as V,c as z,d as T}from"./card-BDLawFCA.js";import{F as ie}from"./form-buttons-BVifFPTX.js";import{c as ae,i as $,A as de,u as ne,E as Q,n as X}from"./index-BmVTDNLh.js";import{T as oe}from"./translatable-tabs-DieI5dfX.js";import{L}from"./label-CESE8nmt.js";import{I as M}from"./input-Bt6SJfb8.js";import{I as H}from"./input-error-DJ7lYN0P.js";import{S as U,a as G,b as J,c as K,d as P}from"./select-B0l8ztPy.js";import{F as ce}from"./file-upload-CR-zhkkJ.js";import{I as le}from"./is-active-CeUpdgAn.js";import{B as Y}from"./button-B1HrZ9sm.js";/* empty css            */import"./spinner-BSjxBjWA.js";import"./loader-circle-U7-ViQKq.js";import"./index-XLtNISu5.js";import"./index-C7P3XbeR.js";import"./Combination-BsqBdnIL.js";import"./index-DymZOPzd.js";import"./index-Ct-UpJ3G.js";import"./index-D_Nhts0U.js";import"./chevron-down-3WnzaSWj.js";import"./check-DwHuZAq7.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],me=ae("Trash2",pe);function Z(d){const e=ee.c(38),{name:s,value:_,onChange:b,createItem:w,renderRow:x,minItems:F,maxItems:c}=d;let y;e[0]!==_?(y=_===void 0?[]:_,e[0]=_,e[1]=y):y=e[1];const i=y,r=F===void 0?0:F;let v;e[2]!==s||e[3]!==b?(v=p=>{b({target:{name:s,value:p}})},e[2]=s,e[3]=b,e[4]=v):v=e[4];const o=v;let A;e[5]!==w||e[6]!==o||e[7]!==c||e[8]!==i?(A=()=>{c&&i.length>=c||o([...i,w()])},e[5]=w,e[6]=o,e[7]=c,e[8]=i,e[9]=A):A=e[9];const N=A;let u;e[10]!==o||e[11]!==r||e[12]!==i?(u=p=>{i.length<=r||o(i.filter((m,D)=>D!==p))},e[10]=o,e[11]=r,e[12]=i,e[13]=u):u=e[13];const B=u;let S;e[14]!==o||e[15]!==i?(S=(p,m)=>{o(i.map((D,te)=>te===p?{...D,...m}:D))},e[14]=o,e[15]=i,e[16]=S):S=e[16];const g=S,f=i.length>r,I=c?i.length<c:!0;let j;e[17]!==f||e[18]!==B||e[19]!==x||e[20]!==g||e[21]!==i?(j=i.length>0&&t.jsx("div",{className:"space-y-3",children:i.map((p,m)=>t.jsxs(k,{className:$("group relative overflow-hidden transition-all duration-200","border-border/50 hover:border-border hover:shadow-md","bg-card"),children:[t.jsxs("div",{className:"p-5 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between pb-3 border-b border-border/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-muted-foreground text-xs font-medium",children:m+1}),t.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Item ",m+1]})]}),t.jsx(Y,{type:"button",variant:"ghost",size:"icon",onClick:()=>B(m),disabled:!f,className:$("h-8 w-8 transition-all duration-200","hover:bg-destructive/10 hover:text-destructive","disabled:opacity-40 disabled:cursor-not-allowed","group-hover:opacity-100"),children:t.jsx(me,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"pt-2",children:x(p,m,D=>g(m,D))})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-border to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},m))}),e[17]=f,e[18]=B,e[19]=x,e[20]=g,e[21]=i,e[22]=j):j=e[22];const C=!I,O=i.length===0&&"mt-0";let a;e[23]!==O?(a=$("w-full transition-all duration-200","hover:border-primary/50 hover:bg-primary/5","disabled:opacity-50 disabled:cursor-not-allowed",O),e[23]=O,e[24]=a):a=e[24];let l;e[25]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(de,{className:"h-4 w-4 mr-2"}),e[25]=l):l=e[25];const q=i.length===0?"Add First Item":"Add Another Item";let h;e[26]!==c||e[27]!==i.length?(h=c&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",i.length,"/",c,")"]}),e[26]=c,e[27]=i.length,e[28]=h):h=e[28];let n;e[29]!==N||e[30]!==a||e[31]!==q||e[32]!==h||e[33]!==C?(n=t.jsxs(Y,{type:"button",variant:"outline",onClick:N,disabled:C,className:a,children:[l,q,h]}),e[29]=N,e[30]=a,e[31]=q,e[32]=h,e[33]=C,e[34]=n):n=e[34];let E;return e[35]!==n||e[36]!==j?(E=t.jsxs("div",{className:"space-y-4",children:[j,n]}),e[35]=n,e[36]=j,e[37]=E):E=e[37],E}function Pe(d){const e=ee.c(36),{product:s,categories:_,additionsData:b,optionsData:w,type:x}=d;let F;e[0]!==b?(F=b===void 0?[]:b,e[0]=b,e[1]=F):F=e[1];const c=F;let y;e[2]!==w?(y=w===void 0?[]:w,e[2]=w,e[3]=y):y=e[3];const i=y,{t:r}=ne("forms");let v;e[4]!==s.additions?(v=s.additions??[],e[4]=s.additions,e[5]=v):v=e[5];const[o,A]=W.useState(v);let N;e[6]!==s.options?(N=s.options??[],e[6]=s.options,e[7]=N):N=e[7];const[u,B]=W.useState(N),S=x==="edit"?"put":"post";let g;e[8]!==s.id||e[9]!==x?(g=x==="edit"&&s.id?Q.update.url({product:Number(s.id)}):Q.store.url(),e[8]=s.id,e[9]=x,e[10]=g):g=e[10];let f;e[11]!==o||e[12]!==u?(f=C=>({...C,additions:o,options:u}),e[11]=o,e[12]=u,e[13]=f):f=e[13];let I;e[14]!==o||e[15]!==c||e[16]!==_||e[17]!==u||e[18]!==i||e[19]!==s.category_id||e[20]!==s.compare_price||e[21]!==s.description||e[22]!==s.images||e[23]!==s.is_active||e[24]!==s.keywords||e[25]!==s.name||e[26]!==s.price||e[27]!==s.quantity||e[28]!==r||e[29]!==x?(I=C=>{const{processing:O,errors:a}=C;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-6 lg:grid lg:grid-cols-3 lg:gap-6 lg:space-y-0",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsx(oe,{fields:[{name:"name",label:r("products.name"),type:"text",value:X(s.name),placeholder:r("products.enter_name")},{name:"description",label:r("products.description"),type:"textarea",value:X(s.description)}],errors:a}),t.jsxs(k,{children:[t.jsxs(R,{children:[t.jsx(V,{children:r("products.keywords")}),t.jsx(z,{children:r("products.keywords_desc")})]}),t.jsx(T,{children:t.jsxs("div",{children:[t.jsx(L,{htmlFor:"keywords",children:r("products.keywords")}),t.jsx(M,{id:"keywords",name:"keywords",type:"text",defaultValue:Array.isArray(s.keywords)?s.keywords.join(", "):"",placeholder:r("products.enter_keywords"),"aria-invalid":a.keywords?"true":"false"}),t.jsx("span",{className:"text-muted-foreground text-xs",children:r("products.keywords_hint")}),t.jsx(H,{message:a.keywords})]})})]}),t.jsxs(k,{children:[t.jsxs(R,{children:[t.jsx(V,{children:r("products.product_images")}),t.jsx(z,{children:r("products.product_images_desc")})]}),t.jsx(T,{className:"space-y-4",children:t.jsx(ce,{name:"temp_ids",label:r("products.images"),multiple:!0,acceptedFileTypes:["image/*"],maxFiles:10,maxFileSize:"5MB",error:a.temp_ids,files:s.images?s.images.map(ye):[]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(k,{children:[t.jsx(R,{children:t.jsx(V,{children:r("products.pricing")})}),t.jsxs(T,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(L,{htmlFor:"price",children:r("products.price")}),t.jsx(M,{id:"price",name:"price",type:"number",step:"0.01",required:!0,defaultValue:s.price,placeholder:r("products.enter_price"),"aria-invalid":a.price?"true":"false"}),t.jsx(H,{message:a.price})]}),t.jsxs("div",{children:[t.jsx(L,{htmlFor:"compare_price",children:r("products.compare_price")}),t.jsx(M,{id:"compare_price",name:"compare_price",type:"number",step:"0.01",defaultValue:s.compare_price||"",placeholder:r("products.enter_compare_price"),"aria-invalid":a.compare_price?"true":"false"}),t.jsx("span",{className:"text-muted-foreground text-xs",children:r("products.compare_price_desc")}),t.jsx(H,{message:a.compare_price})]})]})]}),t.jsxs(k,{children:[t.jsxs(R,{children:[t.jsx(V,{children:r("products.product_category")}),t.jsx(z,{children:r("products.select_category")})]}),t.jsx(T,{children:t.jsxs("div",{children:[t.jsx(L,{htmlFor:"category_id",children:r("products.category")}),t.jsxs(U,{defaultValue:String(s.category_id),name:"category_id",children:[t.jsx(G,{id:"category_id","aria-invalid":a.category_id?"true":"false",children:t.jsx(J,{placeholder:r("products.select_category")})}),t.jsxs(K,{children:[t.jsx(P,{value:"null",children:r("products.no_category")}),_.map(fe)]})]}),t.jsx(H,{message:a.category_id})]})})]}),t.jsxs(k,{children:[t.jsx(R,{children:t.jsx(V,{children:r("products.product_settings")})}),t.jsxs(T,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(L,{htmlFor:"quantity",children:r("products.quantity")}),t.jsx(M,{id:"quantity",name:"quantity",type:"number",min:"0",defaultValue:s.quantity||0,placeholder:r("products.enter_quantity"),"aria-invalid":a.quantity?"true":"false"}),t.jsx(H,{message:a.quantity})]}),t.jsx(le,{value:s.is_active})]})]})]})]}),t.jsxs("div",{className:"flex gap-4 mt-4 items-start",children:[t.jsxs(k,{className:"w-1/2 h-auto",children:[t.jsxs(R,{children:[t.jsx(V,{children:r("products.additions")}),t.jsx(z,{children:r("products.additions_desc")})]}),t.jsx(T,{className:"min-h-fit",children:t.jsx(Z,{name:"additions[]",value:o,onChange:l=>A(l.target.value),createItem:ge,renderRow:(l,q,h)=>t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs(U,{value:String(l.addition_id),onValueChange:n=>h({addition_id:n}),required:!0,children:[t.jsx(G,{children:t.jsx(J,{placeholder:r("products.select_addition")})}),t.jsx(K,{children:c.filter(n=>!o.some((p,m)=>m!==q&&p.addition_id&&String(p.addition_id)===String(n.id))).map(je)})]}),t.jsx(M,{required:!0,type:"number",value:l.price,onChange:n=>h({price:Number(n.target.value)})})]})})})]}),t.jsxs(k,{className:"w-1/2 h-auto",children:[t.jsxs(R,{children:[t.jsx(V,{children:r("products.options")}),t.jsx(z,{children:r("products.options_desc")})]}),t.jsx(T,{className:"min-h-fit",children:t.jsx(Z,{name:"options[]",value:u,onChange:l=>B(l.target.value),createItem:xe,renderRow:(l,q,h)=>t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs(U,{value:String(l.option_id),onValueChange:n=>h({option_id:n}),children:[t.jsx(G,{children:t.jsx(J,{placeholder:r("products.select_option")})}),t.jsx(K,{children:i.filter(n=>!u.some((p,m)=>m!==q&&p.option_id&&String(p.option_id)===String(n.id))).map(he)})]}),t.jsx(M,{type:"number",value:l.price,onChange:n=>h({price:Number(n.target.value)})})]})})})]})]}),t.jsx(ie,{processing:O,handleCancel:ue,isEditMode:x==="edit"})]})},e[14]=o,e[15]=c,e[16]=_,e[17]=u,e[18]=i,e[19]=s.category_id,e[20]=s.compare_price,e[21]=s.description,e[22]=s.images,e[23]=s.is_active,e[24]=s.keywords,e[25]=s.name,e[26]=s.price,e[27]=s.quantity,e[28]=r,e[29]=x,e[30]=I):I=e[30];let j;return e[31]!==I||e[32]!==S||e[33]!==g||e[34]!==f?(j=t.jsx(se,{method:S,action:g,transform:f,children:I}),e[31]=I,e[32]=S,e[33]=g,e[34]=f,e[35]=j):j=e[35],j}function ue(){return re.visit(Q.index.url())}function he(d){return t.jsx(P,{value:String(d.id),children:d.name},d.id)}function xe(){return{option_id:"",price:0}}function je(d){return t.jsx(P,{value:String(d.id),children:d.name},d.id)}function ge(){return{addition_id:"",price:0}}function fe(d){return t.jsx(P,{value:String(d.id),children:d.name},d.id)}function ye(d){return{source:String(d.id)+"/"+d.file_name,options:{type:"local"}}}export{Pe as default};
