import{r as P,j as s,a as O,c as W}from"./app-CReFZqIV.js";import{u as X,S as Y,T as Z,a as ee,b as E,c as se,f as $,d as te,e as z,D as ae,g as le}from"./search-input-CVvtcMQP.js";import{D as Q,a as G,b as J,c as re,d as K,e as ie,g as A}from"./dropdown-menu-w7wWu1Ff.js";import{B as I}from"./button-B0VQxKKl.js";import{c as H,h as B,i as ne,d as F}from"./index--n5hxdl0.js";import{E as oe,a as ce}from"./eye-DE6Hxcvw.js";import{C as de}from"./app-layout-C1AIUYGl.js";const me=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],he=H("ArrowDownUp",me);const ue=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],L=H("ArrowDown",ue);const xe=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],q=H("ArrowUp",xe);function ve({columns:M,data:e,meta:n,filters:d,model:m,createHref:c,onRowClick:l,indexRoute:D}){const[u,k]=P.useState({}),[x,U]=P.useState({}),p=!m||B(`${m}.create`),r=!m||B(`${m}.update`),i=X({data:e,columns:M,pageCount:n?.last_page??1,manualPagination:!0,manualFiltering:!0,manualSorting:!0,state:{rowSelection:u,columnVisibility:x},getCoreRowModel:le(),onRowSelectionChange:k,onColumnVisibilityChange:U});return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{id:"create-button",children:c&&p&&s.jsxs(I,{variant:"outline",className:"cursor-pointer",size:"sm",onClick:()=>O.visit(c||"",{preserveState:!0,preserveScroll:!0}),children:[s.jsx(ne,{})," Create"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{indexRoute:D}),d,s.jsx("div",{className:"flex gap-2",children:s.jsxs(Q,{children:[s.jsx(G,{asChild:!0,children:s.jsx(I,{variant:"outline",size:"sm",className:"ml-auto flex h-8 lg:flex",children:s.jsx(oe,{})})}),s.jsxs(J,{align:"end",className:"w-[150px]",children:[s.jsx(re,{children:"View columns"}),s.jsx(K,{}),i.getAllColumns().filter(t=>typeof t.accessorFn<"u"&&t.getCanHide()).map(t=>s.jsx(ie,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:a=>t.toggleVisibility(!!a),children:t.id},t.id))]})]})})]})]}),s.jsx("div",{className:"overflow-hidden rounded-md border",children:s.jsxs(Z,{children:[s.jsx(ee,{children:i.getHeaderGroups().map(t=>s.jsx(E,{children:t.headers.map(a=>s.jsx(se,{children:a.isPlaceholder?null:$(a.column.columnDef.header,a.getContext())},a.id))},t.id))}),s.jsx(te,{children:i.getRowModel().rows?.length?i.getRowModel().rows.map(t=>s.jsx(E,{"data-state":t.getIsSelected()&&"selected",onClick:a=>{if(r&&l){if(a.target.closest('button, a, [role="menuitem"]'))return;l?.(t.original)}},className:l&&r?"cursor-pointer":"",children:t.getVisibleCells().map(a=>s.jsx(z,{children:$(a.column.columnDef.cell,a.getContext())},a.id))},t.id)):s.jsx(E,{children:s.jsx(z,{colSpan:M.length,className:"h-24 text-center",children:"No results."})})})]})}),n&&s.jsx(ae,{meta:n,indexRoute:D})]})}function ye(M){const e=W.c(48),{column:n,title:d,indexRoute:m,className:c}=M,l=n.id,D=new URL(window.location.href),[u,k]=P.useState(D.searchParams.get("sort")),[x,U]=P.useState(D.searchParams.get("direction")||void 0);let p;e[0]!==l||e[1]!==m||e[2]!==k?(p=o=>{U(o),k(l);const S=m({mergeQuery:{direction:o,sort:o?l:void 0,page:1}}).url;O.get(S,{},{preserveState:!0,preserveScroll:!0,replace:!0})},e[0]=l,e[1]=m,e[2]=k,e[3]=p):p=e[3];const r=p;if(!n.getCanSort()){let o;e[4]!==c?(o=F(c),e[4]=c,e[5]=o):o=e[5];let S;return e[6]!==o||e[7]!==d?(S=s.jsx("div",{className:o,children:d}),e[6]=o,e[7]=d,e[8]=S):S=e[8],S}let i;e[9]!==c?(i=F("flex items-center gap-2",c),e[9]=c,e[10]=i):i=e[10];let t;e[11]!==d?(t=s.jsx("span",{children:d}),e[11]=d,e[12]=t):t=e[12];let a;e[13]!==l||e[14]!==x||e[15]!==u?(a=u===l&&x==="desc"?s.jsx(L,{}):u===l&&x==="asc"?s.jsx(q,{}):s.jsx(de,{}),e[13]=l,e[14]=x,e[15]=u,e[16]=a):a=e[16];let h;e[17]!==t||e[18]!==a?(h=s.jsx(G,{asChild:!0,children:s.jsxs(I,{variant:"ghost",size:"sm",className:"data-[state=open]:bg-accent -ml-3 h-8",children:[t,a]})}),e[17]=t,e[18]=a,e[19]=h):h=e[19];let f;e[20]!==r?(f=()=>r("asc"),e[20]=r,e[21]=f):f=e[21];let T;e[22]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(q,{className:"mr-2 h-4 w-4"}),e[22]=T):T=e[22];let g;e[23]!==f?(g=s.jsxs(A,{onClick:f,children:[T," صعودي"]}),e[23]=f,e[24]=g):g=e[24];let j;e[25]!==r?(j=()=>r("desc"),e[25]=r,e[26]=j):j=e[26];let R;e[27]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(L,{className:"mr-2 h-4 w-4"}),e[27]=R):R=e[27];let w;e[28]!==j?(w=s.jsxs(A,{onClick:j,children:[R," تنازلي"]}),e[28]=j,e[29]=w):w=e[29];let b;e[30]!==r?(b=()=>r(void 0),e[30]=r,e[31]=b):b=e[31];let V;e[32]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(he,{className:"mr-2 h-4 w-4"}),e[32]=V):V=e[32];let C;e[33]!==b?(C=s.jsxs(A,{onClick:b,children:[V," غير مفعل"]}),e[33]=b,e[34]=C):C=e[34];let v;e[35]!==n?(v=n.getCanHide()&&s.jsxs(s.Fragment,{children:[s.jsx(K,{}),s.jsxs(A,{onClick:()=>n.toggleVisibility(!1),children:[s.jsx(ce,{className:"mr-2 h-4 w-4"})," إخفاء"]})]}),e[35]=n,e[36]=v):v=e[36];let y;e[37]!==w||e[38]!==C||e[39]!==v||e[40]!==g?(y=s.jsxs(J,{align:"start",children:[g,w,C,v]}),e[37]=w,e[38]=C,e[39]=v,e[40]=g,e[41]=y):y=e[41];let N;e[42]!==y||e[43]!==h?(N=s.jsxs(Q,{children:[h,y]}),e[42]=y,e[43]=h,e[44]=N):N=e[44];let _;return e[45]!==N||e[46]!==i?(_=s.jsx("div",{className:i,children:N}),e[45]=N,e[46]=i,e[47]=_):_=e[47],_}export{ye as D,ve as a};
