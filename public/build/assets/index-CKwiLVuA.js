import{c as S,m as A,j as e,L as M,a as B}from"./app-CReFZqIV.js";import{A as P}from"./app-layout-C1AIUYGl.js";import{C as F,a as $,b as z,d as E}from"./card-CCXf00hf.js";import{B as H}from"./button-B0VQxKKl.js";import{B as k}from"./badge-9etnQJwJ.js";import{s as C}from"./index-Ch_rmVdx.js";import{c as I,u as R,B as T}from"./index--n5hxdl0.js";import{L as Y}from"./loader-circle-B9H78sE-.js";import{C as w}from"./check-CzBG5M_7.js";/* empty css            */import"./index-peeSS-jg.js";import"./index-Ct4cpP-4.js";import"./index-B9nCDBby.js";import"./index-BePiITCa.js";import"./Combination-B4fHLGDi.js";import"./index-h7gUpZq5.js";import"./x-DOpfyS37.js";import"./index-i7tVzWtG.js";import"./dropdown-menu-w7wWu1Ff.js";import"./index-B6IN1UEK.js";import"./language-switch-DDmzVv3P.js";const q=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],D=I("Sparkles",q);function us(i){const s=S.c(27),{store:t,plans:h}=i,{t:a}=R("subscription"),{processing:f}=A();console.log(t);let l;s[0]!==a?(l=a("page_title"),s[0]=a,s[1]=l):l=s[1];let j;s[2]!==l?(j=[{href:"/store/subscription",title:l}],s[2]=l,s[3]=j):j=s[3];const y=j,L=K;let n;s[4]!==a?(n=a("page_title"),s[4]=a,s[5]=n):n=s[5];const N=t.has_subscription?"Available Plans":"Choose Your Plan";let c;s[6]!==N?(c=e.jsx("h2",{className:"text-2xl font-semibold tracking-tight sm:text-3xl",children:N}),s[6]=N,s[7]=c):c=s[7];let b;s[8]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Select the plan that works best for you"}),s[8]=b):b=s[8];let o;s[9]!==c?(o=e.jsxs("div",{className:"mb-8 text-center",children:[c,b]}),s[9]=c,s[10]=o):o=s[10];let m;s[11]!==h||s[12]!==f||s[13]!==t.has_subscription||s[14]!==t.subscription?.name||s[15]!==t.subscription?.stripe_status||s[16]!==a?(m=h.map(r=>{const x=t.has_subscription&&t.subscription?.stripe_status!=="canceled"&&r.id===(t.subscription?.name?.toLowerCase().includes("monthly")?"monthly":"yearly"),u=r.id==="yearly",v=h.find(J)?.price||0,_=u&&v>0?Math.round((v*12-r.price)/(v*12)*100):0;return e.jsxs(F,{className:`relative flex flex-col transition-all ${u?"border-primary shadow-lg md:scale-105":"border"} ${x?"ring-2 ring-primary":""}`,children:[u&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:e.jsxs(k,{className:"px-3 py-1",children:[e.jsx(D,{className:"mr-1 h-3 w-3"}),a("best_value")]})}),x&&e.jsx("div",{className:"absolute -top-4 right-4",children:e.jsx(k,{variant:"secondary",className:"px-3 py-1",children:"Current"})}),e.jsxs($,{className:"pb-8",children:[e.jsx(z,{className:"text-2xl font-semibold",children:r.name}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-5xl font-bold tracking-tight",children:["$",r.price]}),e.jsxs("span",{className:"text-lg text-muted-foreground",children:["/",r.interval]})]}),u&&_>0&&e.jsxs("p",{className:"mt-2 text-sm text-primary",children:["Save ",_,"% annually"]})]})]}),e.jsxs(E,{className:"flex flex-1 flex-col gap-6",children:[e.jsx("ul",{className:"space-y-3",children:r.features.map(G)}),x&&e.jsxs(M,{href:C.billing.url(),className:"w-full flex items-center gap-2",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"manage billing"]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsx(H,{className:"w-full",onClick:()=>L(r.id),variant:u?"default":"outline",disabled:x||f,size:"lg",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):x?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),a("current_plan")]}):a("subscribe")})})]})]},r.id)}),s[11]=h,s[12]=f,s[13]=t.has_subscription,s[14]=t.subscription?.name,s[15]=t.subscription?.stripe_status,s[16]=a,s[17]=m):m=s[17];let d;s[18]!==m?(d=e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:m}),s[18]=m,s[19]=d):d=s[19];let p;s[20]!==o||s[21]!==d?(p=e.jsx("div",{className:"flex h-full flex-1 flex-col overflow-x-auto",children:e.jsx("div",{className:"container mx-auto px-4 py-8  space-y-8",children:e.jsxs("div",{className:"mx-auto max-w-5xl",children:[o,d]})})}),s[20]=o,s[21]=d,s[22]=p):p=s[22];let g;return s[23]!==y||s[24]!==p||s[25]!==n?(g=e.jsx(P,{breadcrumbs:y,title:n,children:p}),s[23]=y,s[24]=p,s[25]=n,s[26]=g):g=s[26],g}function G(i,s){return e.jsx(e.Fragment,{children:e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(w,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i})]},s)})}function J(i){return i.id==="monthly"}async function K(i){B.post(C.checkout.url(),{plan:i})}export{us as default};
