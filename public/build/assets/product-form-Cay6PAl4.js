import{c as re,j as t,a as U,F as ie,r as ae}from"./app-CyAQI-Ct.js";import{C as k,a as V,b as T,c as z,d as M}from"./card-C0yM5qYx.js";import{F as oe}from"./form-buttons-Cpa3oYR7.js";import{c as ne,i as G,B as de,u as ce,H as Y,n as ee}from"./index-DaKOksDM.js";import{T as le}from"./translatable-tabs-BKamOqgn.js";import{L}from"./label-Dg0hgwaz.js";import{I as H}from"./input-ttp7LPnM.js";import{I as P}from"./input-error-DOym8gwO.js";import{d as J,S as Q,a as W,b as X,c as Z}from"./select-DluUl0iR.js";import{F as pe}from"./file-upload-BHKWQbgB.js";import{I as me}from"./is-active-CALatbze.js";import{B as te}from"./button-BcUc1fug.js";import{M as ue}from"./multi-input-ByukpTJA.js";/* empty css            */import"./spinner-DZLFjjVA.js";import"./loader-circle-CWAdnzuE.js";import"./index-pHIaYk7I.js";import"./index-D1Sxl0Yc.js";import"./Combination-DOle1ty5.js";import"./index-CdqmiLvL.js";import"./index-BsQyWUpF.js";import"./index-kSSgcR_O.js";import"./chevron-down-DrZHp85x.js";import"./check-Bc7V2VzP.js";import"./badge-5ozl_ORM.js";import"./x-CKbwRa-P.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xe=ne("Trash2",he);function se(a){const e=re.c(38),{name:s,value:N,onChange:w,createItem:S,renderRow:x,minItems:q,maxItems:l}=a;let y;e[0]!==N?(y=N===void 0?[]:N,e[0]=N,e[1]=y):y=e[1];const i=y,r=q===void 0?0:q;let v;e[2]!==s||e[3]!==w?(v=j=>{w({target:{name:s,value:j}})},e[2]=s,e[3]=w,e[4]=v):v=e[4];const d=v;let A;e[5]!==S||e[6]!==d||e[7]!==l||e[8]!==i?(A=()=>{l&&i.length>=l||d([...i,S()])},e[5]=S,e[6]=d,e[7]=l,e[8]=i,e[9]=A):A=e[9];const I=A;let h;e[10]!==d||e[11]!==r||e[12]!==i?(h=j=>{i.length<=r||d(i.filter((c,n)=>n!==j))},e[10]=d,e[11]=r,e[12]=i,e[13]=h):h=e[13];const B=h;let _;e[14]!==d||e[15]!==i?(_=(j,c)=>{d(i.map((n,$)=>$===j?{...n,...c}:n))},e[14]=d,e[15]=i,e[16]=_):_=e[16];const g=_,D=i.length>r,E=l?i.length<l:!0;let m;e[17]!==D||e[18]!==B||e[19]!==x||e[20]!==g||e[21]!==i?(m=i.length>0&&t.jsx("div",{className:"space-y-3",children:i.map((j,c)=>t.jsxs(k,{className:G("group relative overflow-hidden transition-all duration-200","border-border/50 hover:border-border hover:shadow-md","bg-card"),children:[t.jsxs("div",{className:"p-5 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between pb-3 border-b border-border/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-muted-foreground text-xs font-medium",children:c+1}),t.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Item ",c+1]})]}),t.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>B(c),disabled:!D,className:G("h-8 w-8 transition-all duration-200","hover:bg-destructive/10 hover:text-destructive","disabled:opacity-40 disabled:cursor-not-allowed","group-hover:opacity-100"),children:t.jsx(xe,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"pt-2",children:x(j,c,n=>g(c,n))})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-border to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},c))}),e[17]=D,e[18]=B,e[19]=x,e[20]=g,e[21]=i,e[22]=m):m=e[22];const C=!E,f=i.length===0&&"mt-0";let u;e[23]!==f?(u=G("w-full transition-all duration-200","hover:border-primary/50 hover:bg-primary/5","disabled:opacity-50 disabled:cursor-not-allowed",f),e[23]=f,e[24]=u):u=e[24];let b;e[25]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(de,{className:"h-4 w-4 mr-2"}),e[25]=b):b=e[25];const R=i.length===0?"Add First Item":"Add Another Item";let F;e[26]!==l||e[27]!==i.length?(F=l&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",i.length,"/",l,")"]}),e[26]=l,e[27]=i.length,e[28]=F):F=e[28];let o;e[29]!==I||e[30]!==u||e[31]!==R||e[32]!==F||e[33]!==C?(o=t.jsxs(te,{type:"button",variant:"outline",onClick:I,disabled:C,className:u,children:[b,R,F]}),e[29]=I,e[30]=u,e[31]=R,e[32]=F,e[33]=C,e[34]=o):o=e[34];let p;return e[35]!==o||e[36]!==m?(p=t.jsxs("div",{className:"space-y-4",children:[m,o]}),e[35]=o,e[36]=m,e[37]=p):p=e[37],p}function Qe(a){const e=re.c(40),{product:s,categories:N,additionsData:w,optionsData:S,type:x}=a;let q;e[0]!==w?(q=w===void 0?[]:w,e[0]=w,e[1]=q):q=e[1];const l=q;let y;e[2]!==S?(y=S===void 0?[]:S,e[2]=S,e[3]=y):y=e[3];const i=y,{t:r}=ce("forms");let v;e[4]!==s.additions?(v=s.additions??[],e[4]=s.additions,e[5]=v):v=e[5];const[d,A]=U.useState(v);let I;e[6]!==s.options?(I=s.options??[],e[6]=s.options,e[7]=I):I=e[7];const[h,B]=U.useState(I);let _;e[8]!==s.keywords?(_=s.keywords??[],e[8]=s.keywords,e[9]=_):_=e[9];const[g,D]=U.useState(_),E=x==="edit"?"put":"post";let m;e[10]!==s.id||e[11]!==x?(m=x==="edit"&&s.id?Y.update.url({product:Number(s.id)}):Y.store.url(),e[10]=s.id,e[11]=x,e[12]=m):m=e[12];let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C={preserveScroll:!0},e[13]=C):C=e[13];let f;e[14]!==d||e[15]!==g||e[16]!==h?(f=R=>({...R,additions:d,options:h,keywords:g}),e[14]=d,e[15]=g,e[16]=h,e[17]=f):f=e[17];let u;e[18]!==d||e[19]!==l||e[20]!==N||e[21]!==g||e[22]!==h||e[23]!==i||e[24]!==s.category_id||e[25]!==s.compare_price||e[26]!==s.description||e[27]!==s.images||e[28]!==s.is_active||e[29]!==s.name||e[30]!==s.price||e[31]!==s.quantity||e[32]!==r||e[33]!==x?(u=R=>{const{processing:F,errors:o}=R;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-6 lg:grid lg:grid-cols-3 lg:gap-6 lg:space-y-0",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsx(le,{fields:[{name:"name",label:r("products.name"),type:"text",value:ee(s.name),placeholder:r("products.enter_name")},{name:"description",label:r("products.description"),type:"textarea",value:ee(s.description)}],errors:o}),t.jsxs(k,{children:[t.jsxs(V,{children:[t.jsx(T,{children:r("products.keywords")}),t.jsx(z,{children:r("products.keywords_desc")})]}),t.jsx(M,{children:t.jsx("div",{children:t.jsx(ue,{name:"keywords",label:r("products.keywords"),placeholder:r("products.enter_keywords"),value:g,onChange:D,error:o.keywords})})})]}),t.jsxs(k,{children:[t.jsxs(V,{children:[t.jsx(T,{children:r("products.product_images")}),t.jsx(z,{children:r("products.product_images_desc")})]}),t.jsx(M,{className:"space-y-4",children:t.jsx(pe,{name:"temp_ids",label:r("products.images"),multiple:!0,acceptedFileTypes:["image/*"],maxFiles:10,maxFileSize:"5MB",error:o.temp_ids,files:s.images?s.images.map(be):[]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(k,{children:[t.jsx(V,{children:t.jsx(T,{children:r("products.pricing")})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(L,{htmlFor:"price",children:r("products.price")}),t.jsx(H,{id:"price",name:"price",type:"number",step:"0.01",required:!0,defaultValue:s.price,placeholder:r("products.enter_price"),"aria-invalid":o.price?"true":"false"}),t.jsx(P,{message:o.price})]}),t.jsxs("div",{children:[t.jsx(L,{htmlFor:"compare_price",children:r("products.compare_price")}),t.jsx(H,{id:"compare_price",name:"compare_price",type:"number",step:"0.01",defaultValue:s.compare_price||"",placeholder:r("products.enter_compare_price"),"aria-invalid":o.compare_price?"true":"false"}),t.jsx("span",{className:"text-muted-foreground text-xs",children:r("products.compare_price_desc")}),t.jsx(P,{message:o.compare_price})]})]})]}),t.jsxs(k,{children:[t.jsxs(V,{children:[t.jsx(T,{children:r("products.product_category")}),t.jsx(z,{children:r("products.select_category")})]}),t.jsx(M,{children:t.jsxs("div",{children:[t.jsx(L,{htmlFor:"category_id",children:r("products.category")}),t.jsxs(J,{defaultValue:s.category_id?String(s.category_id):void 0,name:"category_id",required:!0,children:[t.jsx(Q,{id:"category_id","aria-invalid":o.category_id?"true":"false",children:t.jsx(W,{placeholder:r("products.select_category")})}),t.jsx(X,{children:N.map(_e)})]}),t.jsx(P,{message:o.category_id})]})})]}),t.jsxs(k,{children:[t.jsx(V,{children:t.jsx(T,{children:r("products.product_settings")})}),t.jsxs(M,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(L,{htmlFor:"quantity",children:r("products.quantity")}),t.jsx(H,{id:"quantity",name:"quantity",type:"number",min:"0",defaultValue:s.quantity||0,placeholder:r("products.enter_quantity"),"aria-invalid":o.quantity?"true":"false"}),t.jsx(P,{message:o.quantity})]}),t.jsx(me,{value:s.is_active})]})]})]})]}),t.jsxs("div",{className:"flex gap-4 mt-4 items-start",children:[t.jsxs(k,{className:"w-1/2 h-auto",children:[t.jsxs(V,{children:[t.jsx(T,{children:r("products.additions")}),t.jsx(z,{children:r("products.additions_desc")})]}),t.jsx(M,{className:"min-h-fit",children:t.jsx(se,{name:"additions[]",value:d,onChange:p=>A(p.target.value),createItem:ve,renderRow:(p,j,c)=>t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs(J,{value:String(p.addition_id),onValueChange:n=>c({addition_id:n}),required:!0,children:[t.jsx(Q,{children:t.jsx(W,{placeholder:r("products.select_addition")})}),t.jsx(X,{children:l.filter(n=>!d.some((O,K)=>K!==j&&O.addition_id&&String(O.addition_id)===String(n.id))).map(ye)})]}),t.jsx(H,{required:!0,type:"number",value:p.price,onChange:n=>c({price:Number(n.target.value)})})]})})})]}),t.jsxs(k,{className:"w-1/2 h-auto",children:[t.jsxs(V,{children:[t.jsx(T,{children:r("products.options")}),t.jsx(z,{children:r("products.options_desc")})]}),t.jsx(M,{className:"min-h-fit",children:t.jsx(se,{name:"options[]",value:h,onChange:p=>B(p.target.value),createItem:fe,renderRow:(p,j,c)=>t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs(J,{value:String(p.option_id),onValueChange:n=>c({option_id:n}),children:[t.jsx(Q,{children:t.jsx(W,{placeholder:r("products.select_option")})}),t.jsx(X,{children:i.filter(n=>!h.some((O,K)=>K!==j&&O.option_id&&String(O.option_id)===String(n.id))).map(ge)})]}),t.jsx(H,{type:"number",value:p.price,onChange:n=>c({price:Number(n.target.value)})})]})})})]})]}),t.jsx(oe,{processing:F,handleCancel:je,isEditMode:x==="edit"})]})},e[18]=d,e[19]=l,e[20]=N,e[21]=g,e[22]=h,e[23]=i,e[24]=s.category_id,e[25]=s.compare_price,e[26]=s.description,e[27]=s.images,e[28]=s.is_active,e[29]=s.name,e[30]=s.price,e[31]=s.quantity,e[32]=r,e[33]=x,e[34]=u):u=e[34];let b;return e[35]!==f||e[36]!==u||e[37]!==E||e[38]!==m?(b=t.jsx(ie,{method:E,action:m,options:C,transform:f,children:u}),e[35]=f,e[36]=u,e[37]=E,e[38]=m,e[39]=b):b=e[39],b}function je(){return ae.visit(Y.index.url())}function ge(a){return t.jsx(Z,{value:String(a.id),children:a.name},a.id)}function fe(){return{option_id:"",price:0}}function ye(a){return t.jsx(Z,{value:String(a.id),children:a.name},a.id)}function ve(){return{addition_id:"",price:0}}function _e(a){return t.jsx(Z,{value:String(a.id),children:a.name},a.id)}function be(a){return{source:String(a.id)+"/"+a.file_name,options:{type:"local"}}}export{Qe as default};
